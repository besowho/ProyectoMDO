<pre class="code">
<span class="srcline"><span class="lineno"><a href="214,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T352U3">objs_out</span>, <span class="var type1" id="S3T13U4">pts</span>, <span class="var type1" id="S4T353U5">xy_subset</span>, <span class="var type1" id="S5T354U6">masked_Sea</span> ] = getEdgeAndObjectsNoScaling (<span class="var type1" id="S6T351U9">P_edge</span> , <span class="mxinfo " id="T8:U6"><span class="var type2" id="S7T8V6U10">Im_size</span></span> )</span></span>
<span class="srcline"><span class="lineno"><a href="214,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,3" id="srcline3">  3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,4" id="srcline4">  4</a></span><span class="line"><span class="mxinfo " id="T8:U8"><span class="var type1" id="S8T8U13">size_edge</span> = <span class="mxinfo " id="T8:U10"><span class="var type1" id="S7T8U14">Im_size</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,5" id="srcline5">  5</a></span><span class="line"><span class="mxinfo " id="T8:U12"><span class="var type1" id="S9T8U17">size_obj</span> = <span class="mxinfo " id="T371:U14">size(<span class="mxinfo " id="T371:U15"><span class="var type1" id="S6T351U21">P_edge</span>(:,:,<span class="mxinfo " id="T4:U17">3</span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,6" id="srcline6">  6</a></span><span class="line"><span class="mxinfo " id="T8:U18"><span class="var type1" id="S9T8U27">size_obj</span> = <span class="mxinfo " id="T8:U20"><span class="var type1" id="S9T8U29">size_obj</span>(<span class="mxinfo " id="T8:U22">[<span class="mxinfo " id="T4:U23">2</span>,<span class="mxinfo " id="T4:U24">1</span>]</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,7" id="srcline7">  7</a></span><span class="line"><span class="mxinfo " id="T8:U25"><span class="var type1" id="S11T8U36">scl</span> = <span class="mxinfo " id="T8:U27"><span class="mxinfo " id="T8:U28"><span class="var type1" id="S8T8U38">size_edge</span></span>./<span class="var type1" id="S9T8U39">size_obj</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,8" id="srcline8">  8</a></span><span class="line"><span class="mxinfo " id="T219:U31"><span class="var type1" id="S12T219U42">Tt</span> = <span class="mxinfo " id="T219:U33">diag(<span class="mxinfo " id="T8:U34"><span class="var type1" id="S11T8U46">scl</span>(<span class="mxinfo " id="T8:U36">[<span class="mxinfo " id="T4:U37">2</span>,<span class="mxinfo " id="T4:U38">1</span>]</span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,9" id="srcline9">  9</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="214,10" id="srcline10"> 10</a></span><span class="line"><span class="comment">%% *** Sea edge and its uncertainty score ***</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,11" id="srcline11"> 11</a></span><span class="line">[<span class="mxinfo " id="T4:U39"><span class="mxinfo " id="T371:U40">~</span></span>,<span class="mxinfo " id="T371:U41"><span class="var type1" id="S14T371U55">T</span></span>] = max(<span class="var type1" id="S6T351U58">P_edge</span>,[],3) ; <span class="mxinfo " id="T354:U44"><span class="var type1" id="S14T354U64">T</span> = (<span class="mxinfo " id="T354:U46"><span class="var type1" id="S14T371U67">T</span>==<span class="mxinfo " id="T4:U48">3</span></span>)</span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,12" id="srcline12"> 12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,13" id="srcline13"> 13</a></span><span class="line"><span class="mxinfo " id="T354:U49"><span class="var type1" id="S14T354U71">T</span> = <span class="mxinfo " id="T354:U51">bwmorph(<span class="var type1" id="S14T354U74">T</span>,<span class="string">'diag'</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,14" id="srcline14"> 14</a></span><span class="line"><span class="mxinfo " id="T354:U53"><span class="var type1" id="S14T354U78">T</span> = <span class="mxinfo " id="T354:U55"><span class="fcn" id="F1487N9:B80">extractTheLargestRegion</span>(<span class="var type1" id="S14T354U81">T</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,15" id="srcline15"> 15</a></span><span class="line"><span class="mxinfo " id="T354:U57"><span class="var type1" id="S14T354U84">T</span> = <span class="mxinfo " id="T354:U59">~<span class="mxinfo " id="T354:U60">bwmorph(<span class="mxinfo " id="T354:U61">~<span class="var type1" id="S14T354U89">T</span></span>,<span class="string">'clean'</span>)</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,16" id="srcline16"> 16</a></span><span class="line"><span class="mxinfo " id="T354:U63"><span class="var type1" id="S5T354U93">masked_Sea</span> = <span class="mxinfo " id="T354:U65"><span class="var type1" id="S14T354U95">T</span>'</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,17" id="srcline17"> 17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,18" id="srcline18"> 18</a></span><span class="line"><span class="mxinfo " id="T354:U67"><span class="var type1" id="S18T354U98">dT</span> = <span class="mxinfo " id="T354:U69"><span class="mxinfo " id="T371:U70">[ <span class="mxinfo " id="T496:U71">zeros(<span class="mxinfo " id="T4:U72">size(<span class="var type1" id="S14T354U106">T</span>,1)</span>,1)</span>, <span class="mxinfo " id="T479:U74"><span class="mxinfo " id="T377:U75">diff(<span class="mxinfo " id="T354:U76"><span class="var type1" id="S14T354U113">T</span>'</span>)</span>'</span> ]</span> ~=<span class="mxinfo " id="T4:U78">0</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,19" id="srcline19"> 19</a></span><span class="line"><span class="mxinfo " id="T354:U79"><span class="var type1" id="S21T354U117">dT2</span> = <span class="mxinfo " id="T354:U81"><span class="mxinfo " id="T371:U82">[ <span class="mxinfo " id="T497:U83">zeros(<span class="mxinfo " id="T4:U84">1</span>,<span class="mxinfo " id="T4:U85">size(<span class="var type1" id="S14T354U126">T</span>,2)</span>)</span>; <span class="mxinfo " id="T377:U87">diff(<span class="var type1" id="S14T354U131">T</span>)</span> ]</span> ~=<span class="mxinfo " id="T4:U89">0</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,20" id="srcline20"> 20</a></span><span class="line"><span class="mxinfo " id="T354:U90"><span class="var type1" id="S18T354U135">dT</span> = <span class="mxinfo " id="T354:U92"><span class="var type1" id="S18T354U137">dT</span> | <span class="var type1" id="S21T354U138">dT2</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,21" id="srcline21"> 21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,22" id="srcline22"> 22</a></span><span class="line"><span class="comment">% try</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,23" id="srcline23"> 23</a></span><span class="line"><span class="keyword">if</span> (<span class="mxinfo " id="T2:U95"><span class="mxinfo " id="T4:U96">sum(<span class="mxinfo " id="T378:U97"><span class="var type1" id="S14T354U147">T</span>(:)</span>)</span> ~= <span class="mxinfo " id="T4:U99">numel(<span class="var type1" id="S14T354U151">T</span>)</span></span>) &amp;&amp; (<span class="mxinfo " id="T2:U101"><span class="mxinfo " id="T4:U102">sum(<span class="mxinfo " id="T378:U103"><span class="var type1" id="S18T354U157">dT</span>(:)</span>)</span> ~= <span class="mxinfo " id="T4:U105">0</span></span>),</span></span>
<span class="srcline"><span class="lineno"><a href="214,24" id="srcline24"> 24</a></span><span class="line">    [ <span class="mxinfo " id="T372:U106"><span class="var type1" id="S24T372U163">largest_curve</span></span>, <span class="mxinfo " id="T4:U108"><span class="mxinfo " id="T373:U109">~</span></span> ] = <span class="fcn" id="F1558N8:B166">extractTheLargestCurve</span>(<span class="mxinfo " id="T354:U110"><span class="var type1" id="S18T354U168">dT</span>'</span>) ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,25" id="srcline25"> 25</a></span><span class="line">    <span class="mxinfo " id="T353:U112"><span class="var type1" id="S26T353U171">data</span> = <span class="mxinfo " id="T353:U114">bsxfun(@minus, <span class="mxinfo " id="T353:U115"><span class="var type1" id="S12T219U177">Tt</span>*<span class="mxinfo " id="T379:U117"><span class="var type1" id="S24T372U179">largest_curve</span>'</span></span>, <span class="mxinfo " id="T329:U119">diag(<span class="mxinfo " id="T219:U120"><span class="var type1" id="S12T219U183">Tt</span>/<span class="mxinfo " id="T4:U122">2</span></span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,26" id="srcline26"> 26</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,27" id="srcline27"> 27</a></span><span class="line">    <span class="mxinfo " id="T352:U123"><span class="var type1" id="S2T352U188">objs_out</span> = <span class="mxinfo " id="T391:U125"><span class="fcn" id="F1771N4:B190">Object</span>(0)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,28" id="srcline28"> 28</a></span><span class="line">    <span class="mxinfo " id="T13:U126"><span class="var type1" id="S3T13U194">pts</span> = <span class="mxinfo " id="T13:U128">[ <span class="mxinfo " id="T4:U129">0</span> <span class="mxinfo " id="T4:U130">0</span> <span class="mxinfo " id="T4:U131">0</span> <span class="mxinfo " id="T4:U132">0</span> ]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,29" id="srcline29"> 29</a></span><span class="line">    <span class="mxinfo " id="T353:U133"><span class="var type1" id="S4T353U203">xy_subset</span> = <span class="mxinfo " id="T9:U135">zeros(<span class="mxinfo " id="T4:U136">2</span>,<span class="mxinfo " id="T4:U137">2500</span>)</span></span>; <span class="comment">%xy_subset = [] ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,30" id="srcline30"> 30</a></span><span class="line">    <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,31" id="srcline31"> 31</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,32" id="srcline32"> 32</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="214,33" id="srcline33"> 33</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,34" id="srcline34"> 34</a></span><span class="line"><span class="comment">%% *** Edge of sea ***</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,35" id="srcline35"> 35</a></span><span class="line"><span class="mxinfo " id="T4:U138"><span class="var type1" id="S30T4U211">delta</span> = <span class="mxinfo " id="T4:U140"><span class="mxinfo " id="T4:U141">size(<span class="var type1" id="S6T351U215">P_edge</span>,1)</span>*<span class="mxinfo " id="T4:U143">0.3</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,36" id="srcline36"> 36</a></span><span class="line">[<span class="mxinfo " id="T331:U144"><span class="var type1" id="S31T331U221">a</span></span>, <span class="mxinfo " id="T4:U146"><span class="mxinfo " id="T353:U147">~</span></span>] = <span class="fcn" id="F1734N12:B224">getOptimalLineImage_constrained</span>(<span class="var type1" id="S26T353U225">data</span>, [], <span class="var type1" id="S26T353U228">data</span>, <span class="var type1" id="S30T4U229">delta</span>) ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,37" id="srcline37"> 37</a></span><span class="line"><span class="mxinfo " id="T353:U151"><span class="var type1" id="S4T353U232">xy_subset</span> = <span class="var type1" id="S26T353U233">data</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,38" id="srcline38"> 38</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,39" id="srcline39"> 39</a></span><span class="line"><span class="mxinfo " id="T4:U154"><span class="var type1" id="S33T4U236">x0</span> = <span class="mxinfo " id="T4:U156">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,40" id="srcline40"> 40</a></span><span class="line"><span class="mxinfo " id="T4:U157"><span class="var type1" id="S34T4U240">y0</span> =  <span class="mxinfo " id="T4:U159"><span class="mxinfo " id="T4:U160">-(<span class="mxinfo " id="T4:U161"><span class="mxinfo " id="T4:U162"><span class="mxinfo " id="T4:U163"><span class="var type1" id="S31T331U247">a</span>(<span class="mxinfo " id="T4:U165">1</span>)</span>*<span class="mxinfo " id="T4:U166"><span class="var type1" id="S33T4U249">x0</span></span></span> + <span class="mxinfo " id="T4:U168"><span class="var type1" id="S31T331U251">a</span>(<span class="mxinfo " id="T4:U170">3</span>)</span></span>)</span>/<span class="mxinfo " id="T4:U171"><span class="var type1" id="S31T331U254">a</span>(<span class="mxinfo " id="T4:U173">2</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,41" id="srcline41"> 41</a></span><span class="line"><span class="mxinfo " id="T4:U174"><span class="var type1" id="S35T4U258">x1</span> = <span class="mxinfo " id="T4:U176"><span class="var type1" id="S7T8U260">Im_size</span>(2)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,42" id="srcline42"> 42</a></span><span class="line"><span class="mxinfo " id="T4:U178"><span class="var type1" id="S36T4U264">y1</span> = <span class="mxinfo " id="T4:U180"><span class="mxinfo " id="T4:U181">-(<span class="mxinfo " id="T4:U182"><span class="mxinfo " id="T4:U183"><span class="mxinfo " id="T4:U184"><span class="var type1" id="S31T331U271">a</span>(<span class="mxinfo " id="T4:U186">1</span>)</span>*<span class="mxinfo " id="T4:U187"><span class="var type1" id="S35T4U273">x1</span></span></span> + <span class="mxinfo " id="T4:U189"><span class="var type1" id="S31T331U275">a</span>(<span class="mxinfo " id="T4:U191">3</span>)</span></span>)</span>/<span class="mxinfo " id="T4:U192"><span class="var type1" id="S31T331U278">a</span>(<span class="mxinfo " id="T4:U194">2</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,43" id="srcline43"> 43</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,44" id="srcline44"> 44</a></span><span class="line"><span class="mxinfo " id="T13:U195"><span class="var type1" id="S3T13U282">pts</span> = <span class="mxinfo " id="T13:U197">[ <span class="mxinfo " id="T4:U198"><span class="var type1" id="S33T4U285">x0</span></span>, <span class="var type1" id="S34T4U286">y0</span>, <span class="mxinfo " id="T4:U201"><span class="var type1" id="S35T4U287">x1</span></span>, <span class="var type1" id="S36T4U288">y1</span> ]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,45" id="srcline45"> 45</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,46" id="srcline46"> 46</a></span><span class="line"><span class="mxinfo " id="T354:U204"><span class="var type1" id="S37T354U291">I</span> = <span class="mxinfo " id="T354:U206">~<span class="mxinfo " id="T354:U207"><span class="var type1" id="S14T354U294">T</span>'</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,47" id="srcline47"> 47</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="214,48" id="srcline48"> 48</a></span><span class="line"><span class="comment">%% *** Detected objects ***</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,49" id="srcline49"> 49</a></span><span class="line"><span class="mxinfo " id="T374:U209"><span class="var type1" id="S38T374U297">CC</span> = <span class="mxinfo " id="T374:U211"><span class="fcn" id="F1486N21:B299">replacement_bwconncomp</span>(<span class="var type1" id="S37T354U300">I</span>,8)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,50" id="srcline50"> 50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,51" id="srcline51"> 51</a></span><span class="line"><span class="comment">% These are in fact "sub-boxes" which we merge into acutal object</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,52" id="srcline52"> 52</a></span><span class="line"><span class="comment">% detections</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,53" id="srcline53"> 53</a></span><span class="line"><span class="mxinfo " id="T335:U213"><span class="var type1" id="S40T335U304">objs</span> = <span class="mxinfo " id="T335:U215"><span class="fcn" id="F1738N5:B306">ObjectPart</span>(<span class="mxinfo " id="T4:U216">numel(<span class="var type1" id="S38T374U309">CC</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,54" id="srcline54"> 54</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,55" id="srcline55"> 55</a></span><span class="line"><span class="mxinfo " id="T4:U218"><span class="var type1" id="S42T4U312">counter</span> = <span class="mxinfo " id="T4:U220">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,56" id="srcline56"> 56</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S43T4U316">k</span> = <span class="mxinfo " id="T4:U222">1</span>:<span class="mxinfo " id="T4:U223">numel(<span class="var type1" id="S38T374U321">CC</span>)</span>,</span></span>
<span class="srcline"><span class="lineno"><a href="214,57" id="srcline57"> 57</a></span><span class="line">    <span class="mxinfo " id="T373:U225"><span class="var type1" id="S44T373U324">pixels</span> = <span class="mxinfo " id="T373:U227"><span class="mxinfo " id="T483:U228"><span class="var type1" id="S38T374U327">CC</span>(<span class="var type1" id="S43T4U328">k</span>)</span>.pixel_idx</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,58" id="srcline58"> 58</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,59" id="srcline59"> 59</a></span><span class="line">    <span class="mxinfo " id="T336:U231"><span class="var type1" id="S45T336U332">obj</span> = <span class="mxinfo " id="T336:U233"><span class="fcn" id="F1740N5:B334">ObjectPart</span>(1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,60" id="srcline60"> 60</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,61" id="srcline61"> 61</a></span><span class="line">    <span class="comment">%% Bounding box</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,62" id="srcline62"> 62</a></span><span class="line">    [ <span class="mxinfo " id="T373:U234"><span class="var type1" id="S46T373U339">y</span></span>, <span class="mxinfo " id="T373:U236"><span class="var type1" id="S47T373U340">x</span></span> ] = ind2sub(<span class="var type1" id="S9T8U343">size_obj</span>, <span class="var type1" id="S44T373U344">pixels</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="214,63" id="srcline63"> 63</a></span><span class="line">    <span class="mxinfo " id="T4:U240"><span class="var type1" id="S49T4U347">xmin</span> = <span class="mxinfo " id="T4:U242">min(<span class="mxinfo " id="T41:U243"><span class="var type1" id="S47T373U351">x</span>(:)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,64" id="srcline64"> 64</a></span><span class="line">    <span class="mxinfo " id="T4:U245"><span class="var type1" id="S51T4U355">ymin</span> = <span class="mxinfo " id="T4:U247">min(<span class="mxinfo " id="T41:U248"><span class="var type1" id="S46T373U359">y</span>(:)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,65" id="srcline65"> 65</a></span><span class="line">    <span class="mxinfo " id="T4:U250"><span class="var type1" id="S52T4U363">xmax</span> = <span class="mxinfo " id="T4:U252">max(<span class="mxinfo " id="T41:U253"><span class="var type1" id="S47T373U367">x</span>(:)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,66" id="srcline66"> 66</a></span><span class="line">    <span class="mxinfo " id="T4:U255"><span class="var type1" id="S53T4U371">ymax</span> = <span class="mxinfo " id="T4:U257">max(<span class="mxinfo " id="T41:U258"><span class="var type1" id="S46T373U375">y</span>(:)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,67" id="srcline67"> 67</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,68" id="srcline68"> 68</a></span><span class="line">    <span class="mxinfo " id="T4:U260"><span class="var type1" id="S49T4U379">xmin</span> = <span class="mxinfo " id="T4:U262"><span class="var type1" id="S49T4U381">xmin</span>-<span class="mxinfo " id="T4:U264">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,69" id="srcline69"> 69</a></span><span class="line">    <span class="mxinfo " id="T4:U265"><span class="var type1" id="S51T4U385">ymin</span> = <span class="mxinfo " id="T4:U267"><span class="var type1" id="S51T4U387">ymin</span>-<span class="mxinfo " id="T4:U269">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,70" id="srcline70"> 70</a></span><span class="line">    <span class="mxinfo " id="T4:U270"><span class="var type1" id="S54T4U391">width</span> = <span class="mxinfo " id="T4:U272"><span class="var type1" id="S52T4U393">xmax</span>-<span class="var type1" id="S49T4U394">xmin</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,71" id="srcline71"> 71</a></span><span class="line">    <span class="mxinfo " id="T4:U275"><span class="var type1" id="S55T4U397">height</span> = <span class="mxinfo " id="T4:U277"><span class="var type1" id="S53T4U399">ymax</span>-<span class="var type1" id="S51T4U400">ymin</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,72" id="srcline72"> 72</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,73" id="srcline73"> 73</a></span><span class="line">    <span class="comment">% Rescale bounding box</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,74" id="srcline74"> 74</a></span><span class="line">    <span class="mxinfo " id="T4:U280"><span class="var type1" id="S49T4U403">xmin</span> = <span class="mxinfo " id="T4:U282"><span class="var type1" id="S49T4U405">xmin</span>*<span class="mxinfo " id="T4:U284"><span class="var type1" id="S12T219U407">Tt</span>(<span class="mxinfo " id="T4:U286">1</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,75" id="srcline75"> 75</a></span><span class="line">    <span class="mxinfo " id="T4:U287"><span class="var type1" id="S51T4U411">ymin</span> = <span class="mxinfo " id="T4:U289"><span class="var type1" id="S51T4U413">ymin</span>*<span class="mxinfo " id="T4:U291"><span class="var type1" id="S12T219U415">Tt</span>(<span class="mxinfo " id="T4:U293">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,76" id="srcline76"> 76</a></span><span class="line">    <span class="mxinfo " id="T4:U294"><span class="var type1" id="S54T4U419">width</span> = <span class="mxinfo " id="T4:U296"><span class="var type1" id="S54T4U421">width</span>*<span class="mxinfo " id="T4:U298"><span class="var type1" id="S12T219U423">Tt</span>(<span class="mxinfo " id="T4:U300">1</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,77" id="srcline77"> 77</a></span><span class="line">    <span class="mxinfo " id="T4:U301"><span class="var type1" id="S55T4U427">height</span> = <span class="mxinfo " id="T4:U303"><span class="var type1" id="S55T4U429">height</span>*<span class="mxinfo " id="T4:U305"><span class="var type1" id="S12T219U431">Tt</span>(<span class="mxinfo " id="T4:U307">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,78" id="srcline78"> 78</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,79" id="srcline79"> 79</a></span><span class="line">    <span class="mxinfo " id="T13:U308"><span class="mxinfo " id="T13:U309"><span class="var type1" id="S45T336U436">obj</span>.bounding_box</span> = <span class="mxinfo " id="T13:U311">[<span class="var type1" id="S49T4U440">xmin</span>, <span class="var type1" id="S51T4U441">ymin</span>, <span class="var type1" id="S54T4U442">width</span>, <span class="var type1" id="S55T4U443">height</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,80" id="srcline80"> 80</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,81" id="srcline81"> 81</a></span><span class="line">    <span class="comment">% Area</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,82" id="srcline82"> 82</a></span><span class="line">    <span class="mxinfo " id="T4:U316"><span class="mxinfo " id="T4:U317"><span class="var type1" id="S45T336U447">obj</span>.area</span> = <span class="mxinfo " id="T4:U319"><span class="var type1" id="S54T4U450">width</span>*<span class="var type1" id="S55T4U451">height</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,83" id="srcline83"> 83</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,84" id="srcline84"> 84</a></span><span class="line">    <span class="comment">% Boundary</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,85" id="srcline85"> 85</a></span><span class="line">    [<span class="mxinfo " id="T4:U322"><span class="var type1" id="S51T4U455">ymin</span></span>,<span class="mxinfo " id="T4:U324"><span class="var type1" id="S56T4U456">loc</span></span>]=min(<span class="mxinfo " id="T385:U326"><span class="var type1" id="S46T373U460">y</span>(:)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="214,86" id="srcline86"> 86</a></span><span class="line">    <span class="mxinfo " id="T4:U328"><span class="var type1" id="S49T4U464">xmin</span> = <span class="mxinfo " id="T4:U330"><span class="mxinfo " id="T4:U331"><span class="var type1" id="S47T373U467">x</span>(<span class="var type1" id="S56T4U468">loc</span>)</span>*<span class="mxinfo " id="T4:U334"><span class="var type1" id="S12T219U470">Tt</span>(<span class="mxinfo " id="T4:U336">1</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,87" id="srcline87"> 87</a></span><span class="line">    <span class="mxinfo " id="T4:U337"><span class="var type1" id="S51T4U474">ymin</span> = <span class="mxinfo " id="T4:U339"><span class="mxinfo " id="T4:U340"><span class="var type1" id="S12T219U477">Tt</span>(<span class="mxinfo " id="T4:U342">4</span>)</span>*<span class="var type1" id="S51T4U479">ymin</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,88" id="srcline88"> 88</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,89" id="srcline89"> 89</a></span><span class="line">    [<span class="mxinfo " id="T4:U344"><span class="mxinfo " id="T4:U345">~</span></span>,<span class="mxinfo " id="T4:U346"><span class="var type1" id="S56T4U484">loc</span></span>] = min(<span class="mxinfo " id="T380:U348">abs(<span class="mxinfo " id="T380:U349"><span class="mxinfo " id="T380:U350"><span class="var type1" id="S4T353U491">xy_subset</span>(<span class="mxinfo " id="T4:U352">1</span>,:)</span>-<span class="var type1" id="S49T4U494">xmin</span></span>)</span>) ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,90" id="srcline90"> 90</a></span><span class="line">    <span class="mxinfo " id="T329:U354"><span class="var type1" id="S58T329U497">boundary</span> = <span class="mxinfo " id="T329:U356"><span class="var type1" id="S4T353U499">xy_subset</span>(:,<span class="var type1" id="S56T4U501">loc</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,91" id="srcline91"> 91</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="214,92" id="srcline92"> 92</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T2:U359"><span class="mxinfo " id="T4:U360"><span class="var type1" id="S58T329U506">boundary</span>(<span class="mxinfo " id="T4:U362">2</span>)</span> &gt; <span class="var type1" id="S51T4U508">ymin</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="214,93" id="srcline93"> 93</a></span><span class="line">        <span class="keyword">continue</span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="214,94" id="srcline94"> 94</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,95" id="srcline95"> 95</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="214,96" id="srcline96"> 96</a></span><span class="line">    <span class="comment">%% Add to the list</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,97" id="srcline97"> 97</a></span><span class="line">    <span class="mxinfo " id="T336:U364"><span class="mxinfo " id="T336:U365"><span class="var type1" id="S40T335U513">objs</span>(<span class="mxinfo " id="T4:U367"><span class="var type1" id="S42T4U515">counter</span>+<span class="mxinfo " id="T4:U369">1</span></span>)</span> = <span class="var type1" id="S45T336U517">obj</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,98" id="srcline98"> 98</a></span><span class="line">    <span class="mxinfo " id="T4:U371"><span class="var type1" id="S42T4U520">counter</span> = <span class="mxinfo " id="T4:U373"><span class="var type1" id="S42T4U522">counter</span>+<span class="mxinfo " id="T4:U375">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,99" id="srcline99"> 99</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="214,100" id="srcline100">100</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,101" id="srcline101">101</a></span><span class="line"><span class="mxinfo " id="T335:U376"><span class="var type1" id="S40T335U527">objs</span>(<span class="mxinfo " id="T180:U378"><span class="mxinfo " id="T4:U379"><span class="var type1" id="S42T4U530">counter</span>+<span class="mxinfo " id="T4:U381">1</span></span>:<span class="mxinfo " id="T4:U382">end</span></span>) = []</span>; </span></span>
<span class="srcline"><span class="lineno"><a href="214,102" id="srcline102">102</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="214,103" id="srcline103">103</a></span><span class="line"><span class="mxinfo " id="T352:U383"><span class="var type1" id="S2T352U538">objs_out</span> = <span class="mxinfo " id="T352:U385"><span class="fcn" id="F1849N26:B540">suppressDetections</span>(<span class="var type1" id="S40T335U541">objs</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="214,104" id="srcline104">104</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
