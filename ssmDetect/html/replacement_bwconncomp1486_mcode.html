<pre class="code">
<span class="srcline"><span class="lineno"><a href="196,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T374U3">CC</span> = replacement_bwconncomp (<span class="var type1" id="S3T354U6">I</span>, <span class="mxinfo " id="T4:U3"><span class="var type2" id="S4T4V4U7">n</span></span>) </span></span>
<span class="srcline"><span class="lineno"><a href="196,2" id="srcline2">  2</a></span><span class="line">    <span class="comment">% A MATLAB Coder friendly implementation of BWCONNCOMP</span></span></span>
<span class="srcline"><span class="lineno"><a href="196,3" id="srcline3">  3</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="196,4" id="srcline4">  4</a></span><span class="line">    <span class="comment">% Use label implementation to label connected components</span></span></span>
<span class="srcline"><span class="lineno"><a href="196,5" id="srcline5">  5</a></span><span class="line">    [ <span class="mxinfo " id="T371:U5"><span class="var type1" id="S5T371U11">L</span></span>, <span class="mxinfo " id="T4:U7"><span class="var type1" id="S6T4U12">num</span></span> ] = <span class="fcn" id="F1473N22:B14">label</span>(<span class="var type1" id="S3T354U15">I</span>, <span class="var type1" id="S4T4U16">n</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="196,6" id="srcline6">  6</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="196,7" id="srcline7">  7</a></span><span class="line">    <span class="mxinfo " id="T374:U11"><span class="var type1" id="S2T374U19">CC</span> = <span class="mxinfo " id="T317:U13">repmat(struct(<span class="string">'label'</span>, 0, <span class="string">'pixel_idx'</span>, [], <span class="string">'area'</span>, 0), 1, <span class="var type1" id="S6T4U32">num</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="196,8" id="srcline8">  8</a></span><span class="line">    coder.cstructname(<span class="var type0" id="S2T0U38">CC</span>, <span class="string">'ConnectedComponent'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="196,9" id="srcline9">  9</a></span><span class="line">    coder.varsize(<span class="string">'CC(:).pixel_idx'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="196,10" id="srcline10"> 10</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="196,11" id="srcline11"> 11</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S11T4U48">i</span> = <span class="mxinfo " id="T4:U16">1</span>:<span class="var type1" id="S6T4U51">num</span>, </span></span>
<span class="srcline"><span class="lineno"><a href="196,12" id="srcline12"> 12</a></span><span class="line">        <span class="mxinfo " id="T4:U18"><span class="mxinfo " id="T4:U19"><span class="mxinfo " id="T483:U20"><span class="var type1" id="S2T374U56">CC</span>(<span class="var type1" id="S11T4U57">i</span>)</span>.label</span> = <span class="var type1" id="S11T4U59">i</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="196,13" id="srcline13"> 13</a></span><span class="line">        <span class="mxinfo " id="T373:U24"><span class="mxinfo " id="T373:U25"><span class="mxinfo " id="T483:U26"><span class="var type1" id="S2T374U64">CC</span>(<span class="var type1" id="S11T4U65">i</span>)</span>.pixel_idx</span> = <span class="mxinfo " id="T385:U29">find(<span class="mxinfo " id="T378:U30"><span class="mxinfo " id="T385:U31"><span class="var type1" id="S5T371U71">L</span>(:)</span> == <span class="var type1" id="S11T4U73">i</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="196,14" id="srcline14"> 14</a></span><span class="line">        <span class="mxinfo " id="T4:U34"><span class="mxinfo " id="T4:U35"><span class="mxinfo " id="T483:U36"><span class="var type1" id="S2T374U78">CC</span>(<span class="var type1" id="S11T4U79">i</span>)</span>.area</span> = <span class="mxinfo " id="T373:U39">numel(<span class="mxinfo " id="T373:U40"><span class="mxinfo " id="T483:U41"><span class="var type1" id="S2T374U85">CC</span>(<span class="var type1" id="S11T4U86">i</span>)</span>.pixel_idx</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="196,15" id="srcline15"> 15</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="196,16" id="srcline16"> 16</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="196,17" id="srcline17"> 17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="196,18" id="srcline18"> 18</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="196,19" id="srcline19"> 19</a></span><span class="line"><span class="comment">% -------------------------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="196,20" id="srcline20"> 20</a></span><span class="line"><span class="comment">%http://www.mathworks.com/matlabcentral/fileexchange/26946-label-connected-components-in-2-d-array</span></span></span>
<span class="srcline"><span class="lineno"><a href="196,21" id="srcline21"> 21</a></span><span class="line"><span class="comment">% -------------------------------------------------------------------------</span></span></span>
</pre>
